function reload(){let e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")),a=t.find(e=>e.classList.contains("active"));a.contentWindow&&a.contentWindow.location.reload(!0)}function expand(){let e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")),a=t.find(e=>e.classList.contains("active"));a.requestFullscreen()}function goBack(){let e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")),a=t.find(e=>e.classList.contains("active"));a.contentWindow.history.back()}function goForward(){let e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")),a=t.find(e=>e.classList.contains("active"));a.contentWindow.history.forward()}function erudaToggle(){let e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")),a=t.find(e=>e.classList.contains("active")),i=a.contentWindow,l=a.contentDocument;if(i&&l){if(i.eruda?._isInit)i.eruda.destroy();else{let n=l.createElement("script");n.src="https://cdn.jsdelivr.net/npm/eruda",n.onload=function(){i&&(i.eruda.init(),i.eruda.show())},i.document?.head?.appendChild(n)||l.head.appendChild(n)}}}document.addEventListener("DOMContentLoaded",function(e){let t=document.getElementById("add-tab"),a=document.getElementById("tab-list"),i=document.getElementById("iframe-container"),l=1;function n(e){let t=e.target.closest("li").dataset.tabId,l=Array.from(a.querySelectorAll("li"));l.forEach(e=>e.classList.remove("active"));let n=Array.from(i.querySelectorAll("iframe"));n.forEach(e=>e.classList.remove("active"));let r=a.querySelector(`[data-tab-id='${t}']`);r?r.classList.add("active"):console.log("No selected tab found with ID:",t);let d=i.querySelector(`[data-tab-id='${t}']`);d?d.classList.add("active"):console.log("No selected iframe found with ID:",t)}t.addEventListener("click",()=>{let e=document.createElement("li"),t=document.createElement("span"),r=document.createElement("iframe");t.textContent="New Tab",t.className="tab-title",e.dataset.tabId=l,e.addEventListener("click",n),e.setAttribute("draggable",!0);let d=document.createElement("button");d.classList.add("close-tab"),d.innerHTML="&#10005;",d.addEventListener("click",t=>{t.stopPropagation();let l=a.querySelector(`[data-tab-id='${e.dataset.tabId}']`),n=i.querySelector(`[data-tab-id='${e.dataset.tabId}']`);if(l&&n){let r=parseInt(l.dataset.tabId);l.remove(),n.remove();let d=Array.from(a.querySelectorAll("li"));if(d.length>0){let o=d.findIndex(e=>parseInt(e.dataset.tabId)>r);-1===o&&(o=d.length-1);let c=d[o],s=i.querySelector(`[data-tab-id='${c.dataset.tabId}']`);c&&s&&(c.classList.add("active"),s.classList.add("active"))}}}),e.appendChild(t),e.appendChild(d),a.appendChild(e);let o=Array.from(a.querySelectorAll("li"));o.forEach(e=>e.classList.remove("active"));let c=Array.from(i.querySelectorAll("iframe"));c.forEach(e=>e.classList.remove("active")),e.classList.add("active"),r.src="tabsinner.html",r.dataset.tabId=l,r.classList.add("active"),i.appendChild(r),r.addEventListener("load",()=>{let e=r.contentDocument.title;t.textContent=e}),l++}),window.addEventListener("message",function(e){if(e.origin!==window.location.origin){console.warn("Received message from unexpected origin:",e.origin);return}console.log("Received message:",e.data),e.data&&e.data.url?Array.from(i.querySelectorAll("iframe")):console.log("No URL data in the message.");let t=iframes.find(e=>e.classList.contains("active"));if(t){console.log("Visible iframe:",t);let l=a.querySelector(`[data-tab-id='${t.dataset.tabId}']`);if(l){console.log("Tab to update:",l);let n=l.querySelector(".tab-title");n?(console.log("Tab title:",n),n.textContent=e.data.url,console.log("Hostname:",e.data.url)):console.log("No tab title element found.")}else console.log("No tab to update found.")}else console.log("No tab visible iframe found.")});let r=null;a.addEventListener("dragstart",e=>{r=e.target}),a.addEventListener("dragover",e=>{e.preventDefault();let t=e.target;if("LI"===t.tagName&&t!==r){let i=Array.from(a.children).indexOf(t),l=Array.from(a.children).indexOf(r);i<l?a.insertBefore(r,t):a.insertBefore(r,t.nextSibling)}}),a.addEventListener("dragend",()=>{r=null})});